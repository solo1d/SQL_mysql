# 备份还原

### 三种备份方式

* 通过使用 bash\# mysqldump 命令备份
  * 命令会将数据库中的数据备份成一个文本文件. 表的结构和表中的数据存储在生成的文本文件中.
* 直接复制整个数据库目录
  * 
* 使用 mysqlhotcopy 工具快速备份 \(主要针对 Linux\)

#### mysqldump 命令备份方式

**原理:**  它会先查出需要备份的表的结构, 在再文本文件中生成一个 CREATE 语句, 然后将表中的所有记录转换成一条 INSERT 语句. 然后通过这些语句,就能够创建表并插入数据. \(说白了就是变成了一个脚本\)

```bash
"备份 指定库下的 某些指定的表"
bash # mysqldump -u 用户名  -p  dbname table1 table2 ...... tableN > name.sql   

"备份一个数据库, 不加表名就行"
bash # mysqldump -u 用户名  -p  dbname  > name.sql   

"备份多个数据库"
bash # mysqldump -u 用户名  -p  --databaes dbname1 dbname2 .... dbnameN > name.sql

"备份所有的数据库"
bash # mysqldump -u 用户名  -p  --all-databases > name.sql

        #首先需要 用户 有对表和数据库有相应的 读写权限才可以执行该命令
        # 解释:  dbname        需要备份的库 的名称
        #        --databaes   这个参数表示后面跟的都是数据库名称
        #        --all-databases    表示选择所有的数据库
        #        table1       该库下需要备份的的表名,表于表之间不需要逗号
        #        >            指向的是备份到哪个文件,也可以写路径
        #        name.sql     指的是备份到name.sql 这个文件内.
        
#执行该命令后, 只会提示你输入密码, 除此之外没有任何提示, 一旦出现任何提示,就代表出现了问题,会造成备份失败

# 如果使用该命令生成的备份去别的库进行还原的话,需要注意, 绝对不能出现和备份中同名的 表和库,
#     否则会直接被删除!!!
#  还原的时候, 会进行锁表操作.   还原结束后才会解锁
```

### 还原

```bash
"还原某一个单独的库, 但是需要保证这库存在,而且和备份文件的库名相同"
bash $ mysql -u root -p bank < name.sql
                "bank是一个库名,它存在数据库中,也存在备份文件中"
                
"还原整个库,将库内所有的内容全部还原到 备份文件 备份的日期"
bash $ mysql -u root -p < name.sql

"还原某个数据库中的某张固定的表"
"还是去仔细去备份中寻找被删除表的 建表语句和insert语句, 然后拷贝出来做成脚本来进行恢复 较为方便"

```

