# 面试题

### 查询模型面试题

1.有个 mian 表, 其中有列为 num 是int类型,  里面存放了若干个值\(1 ~ 50之间\) ,  要求 : 将  20&lt;=num&lt;30  之间的值修改为20 ,  和 30 &lt;= num &lt;40  之间的值修改为 30 .   使用一条指令.

```sql
解:
mysql> UPDATE mian SET num=floor(num/10)*10     
        WHERE num>=20 AND num<=39;
# 主要思路是将num当初变量来看, int会发生截断,小数丢失,然后再乘10, 会得到整数.
# 故意挑选的两个值,  如果是其他的值, 那么可以使用  a AND a  OR b AND b;
# floor()是一个函数, 他会把括号中的值进行取整数,就是扔掉小数点. 
```



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

2.有个学生成绩表 result  , 内容是下面表的表格  

| name | subject | score |
| :--- | :--- | :--- |
| 张三 | 数学 | 90 |
| 张三 | 语文 | 50 |
| 张三 | 地理 | 40 |
| 李四 | 语文 | 55 |
| 李四 | 政治 | 45 |
| 王五 | 政治 | 30 |
| 赵六 | 语文 | 100 |
| 赵六 | 数学 | 99 |
| 赵六 | 品德 | 98 |

 求挂科2门及以上  学生的平均分\(所有分数相加\).

```sql
解:
mysql> SELECT name,AVG(score) AS fen ,SUM(score<60) AS gks FROM result
        GROUP BY name 
         HAVING gks >=2;
#逆向思维思路, 首先求的所有学生的平均分, 然后再次求的每个同学挂了门课,
#然后使用学生名字进行分组, 最后求得挂科数大于2的 学生是哪几个.

#输出结果:
+--------+---------+------+
| name   | fen     | gks  |
+--------+---------+------+
| 张三   | 60.0000 |    2 |
| 李四   | 50.0000 |    2 |
+--------+---------+------+
```



++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

3.面试题,根据要求写出SQL语句.  经典 左连接操作题.

```sql
#赛事表,   m 
#mid主键(int) ,hid 主队ID(int), gid 客队ID(int), mres 比分(varchar(10)), matime 时间(date)
mysql> SELECT * FROM m;
+------+------+------+------+------------+
| mid  | hid  | gid  | mres | matime     |
+------+------+------+------+------------+
|    1 |    1 |    2 | 2:0  | 2006-05-21 |
|    2 |    2 |    3 | 1:2  | 2006-06-21 |
|    3 |    3 |    1 | 2:5  | 2006-06-25 |
|    4 |    2 |    1 | 3:2  | 2006-07-21 |
+------+------+------+------+------------+

#参赛队伍表.   t
#tid 主键 主/客ID (int),  tname 队伍名称(varchar(20)) 
mysql> SELECT * FROM t;
+------+--------------+
| tid  | tname        |
+------+--------------+
|    1 | 国安         |
|    2 | 申花         |
|    3 | 公益联动     |
+------+--------------+

求:  查出 2006-6-1 到2006-7-1之间举行的所有比赛，并且用以下形式列出：

+------+--------------+------+------+--------------+------------+
| hid  | hname        | mres | gid  | gname        | matime     |
+------+--------------+------+------+--------------+------------+
|    3 | 公益联队     | 2:5  |    1 | 国安         | 2006-06-25 |
|    2 | 申花         | 1:2  |    3 | 公益联队     | 2006-06-21 |
+------+--------------+------+------+--------------+------------+
```

```sql
# 解:
mysql> SELECT hid,t1.tname AS hname,mres,gid,t2.tname AS gname,matime 
        FROM m LEFT JOIN t AS t1 ON t1.tid=m.hid  
          LEFT JOIN t AS t2 ON t2.tid = m.gid  
          WHERE matime BETWEEN '2006-06-01' AND '2006-07-01';

# 连续两次左连接查询, 而且使用 AS 重命名来达到分开表的显示的语法.
```







++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

