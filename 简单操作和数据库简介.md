---
description: '里面的语句有些过时,不适合Mysql,  只适合 SQLserver 2008 r2 (微软)'
---

# 简单操作和数据库简介

## 1、**数据库简介** 

* 解决的问题：**持久化存储，优化读写，保证数据的有效性**
* 关系型数据库:
  * 基于E-R模型（数据关系模型）
  * 使用sql语言进行操作
* 分类：文档型sqlite，服务型
* 数据库设计
  * **三范式：列不可拆分，唯一标识，引用主键**
  * 关系及存储：
    * 1对1：1个对象A对应着1个对象B，1个对象B对应着1个对象A,
      * 关系可以存入A或B对象中（例如：国家规定的夫妻关系）
    * 1对多：1个对象A对应着n个对象B，1个对象B对应着1个对象A
      * 关系存入B对象中（学生和班级，一个班级可以有多个学生，但一个学生只许有一个班级）
    * 多对多：1个对象A对应着n个对象B，1个对象B对应着m个对象A
      * 关系存入新建的一个关系表中（学生和选课， 1个学生可以有多门选课，一门选课可以有多个学生\)

## 2、登陆方式

* 开启服务
* 登录方式及设置
* 添加用户名
* 连接局域网中的数据库：启用TCP/IP协议

## 3、界面操作

* **数据库：创建，删除，分离，附加，生成脚本（架构，数据）**
* **表：创建、修改、删除**
  * 字段类型介绍：**int, bit, datetime, decimal\(5,2\), char/ nchar / varchar / nvarchar**
  * **字符串类型var的区别：有var表示可变长度.\(能不用就不用\)**
    * _没有var表示不可变长度，如果长度不够，会在末尾补空格\(一般用这个\)._
      * **如果超过设定长度,则会报错**
    * **有var表示可变长度, 但是不会在字符串末尾补任何内容.**
  * **字符串类型n的区别：有n表示unicode编码\(UTF8\)，每个字符占二个字节；**
    * ==_没有n表示非unicode编码，英文或数字占一个字节，中文占两个字节;_==
  * **如果选择int值时，可以设置标识：此列的值为系统帮助维护，更轻松的实现唯一标识**
* 约束：**实现数据的有效性检查 \( 它保证了数据的有效性 \)**
  * **主键，非空，惟一\(UNIQUE\)，默认，检查，外键**
* 示例:
  * 班级表ClassInfo（编号cId，名称cTitle nvarchar\(10\)）
  * 学生表（编号，姓名，性别，出生日期，电话，邮箱，班级）

## 4、脚本操作

**不区分大小写，字符串使用单引号，末尾不需要加分号**

按照功能分类：

* DDL：数据定义语言，用于进行各种数据库对象的创建，主要操作包括下面三个.\(很少用\)
  * create 创建 \(这个修改只能用于表,  数据库是没有修改操作的\)
  * alter    修改
  * drop    删除
* DML：数据管理语言，用于对表数据的添加、修改、删除、查询，主键操作包括下面四个
  * insert     增加数据
  * update   修改数据
  * delete     删除数据
  * select     查找数据 \(这个最难\)
* DCL：数据控制语言，用于进行权限分配等

**注释**：**--单行注释**，/**/多行注释**

### 数据库：创建、删除 ,  数据库是没有修改这个操作的

#### 可以通过查看master数据库中的sysdatabases表，来了解当前存在的数据库

```sql
    create database --数据库名
    on primary   --定义主文件
    (
        name='stuDB_data',  -- 主数据文件的逻辑名称
        filename='D:\stuDB_data.mdf', -- 主数据文件的物理名称
        size=5mb, --主数据文件的初始大小
        maxsize=100mb, -- 主数据文件增长的最大值
        filegrowth=15%--主数据文件的增长率
    )
    log on
    (
        name='stuDB_log',
        filename='D:\stuDB_log.ldf',
        size=2mb,
        filegrowth=1mb
    )
```

使用数据库：use 数据库名 

表：创建、修改、删除 通过select \* from sysobjects where xtype='U '可以查看所有存在的表 

         多个列间使用逗号分隔 



* 主键：primary key 
* 非空：not null 
* 惟一：unique 
* 默认：default\(\) 
* 约束：check\(\)
* 外键：foreign key\(列名\)   references 表名\(列名\)



## 5、表数据的操作

#### 简单查询：select \* from 表名

### 增加数据：insert into 表名\(列名\) values\(值\)

* 说明1：要求值的列名与值要位置对应
* 说明2：如果所有更都插入值，可以省略列名部分 
* 扩展：一次性增加多行，可以直接在values后面拼接多个数据，之间用逗号分隔 

#### 修改数据：update 表名 set 列名1=值1,列名2=值2... where ... 

### 删除数据：delete from 表名 where ... 

* 清空：truncate table 表名
* 说明：from关键字可以省略不写 
* 通常实现：逻辑删除，物理删除

### 常用辅助命令及快捷键 

* set statistics time on/off：在消息栏显示详细执行时间
* ctrl+e执行
* ctrl+r隐藏消息栏
* ctrl+l计划任务, 对sql语句进行分析



